<!DOCTYPE html> 
<html>
<head>
    <title>Hometown Heroes - Support Teachers</title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
</head>
<body>
    <header>
        <h1>Welcome to Hometown Heroes</h1>
        <p>Supporting Teachers and Students</p>
    </header>

    <nav>
        <ul>
            <li><a href="/pages/homepage.html">Home</a></li>
            <li><a href="/pages/about.html">About</a></li>
            <li><a href="/pages/contact.html">Contact</a></li>
            <!-- Add links to other pages here -->
        </ul>
    </nav>

    <main>
        <section> 
            <h2>Find a Teacher to Support</h2>
            <p>Explore teachers from across America and make a difference in their classroom.</p>
            <a href="/pages/states/index.html" class="btn">Find Teachers</a>
        </section>

        <section>
            <h2>Find a Random Teacher</h2>
            <p>Discover a teacher at random and make a positive impact on their classroom.</p>
            <button id="randomButton" class="btn">Find Random Teacher</button>
            <div id="randomTeacherInfo">
                <!-- Teacher information will be displayed here -->
            </div>
        </section>

        <section>
            <h2>Are You a Teacher?</h2>
            <p>If you're an educator in need of support, register to create your profile.</p>
            <a href="/pages/register.html" class="btn">Register</a>
        </section>

        <section>
            <h2>Do you have an account?</h2>
            <a href="/pages/login.html" class="btn">Login</a>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Hometown Heroes</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const randomButton = document.getElementById("randomButton");
            const randomTeacherInfo = document.getElementById("randomTeacherInfo");
    
            randomButton.addEventListener("click", async function () {
                try {
                    const response = await fetch("http://127.0.0.1:8000/random_teacher/", {
                        method: "GET",
                    });
    
                    if (response.ok) {
                        const data = await response.json();
                        const teacherName = `${data.first_name} ${data.last_name}`;
                        
                        // Construct the URL
                        const teacherNameSlug = teacherName.replace(/\s/g, " ");
                        const url = `http://127.0.0.1:5500/pages/states/${data.state}/${data.county}/${data.district}/${data.school}/${teacherNameSlug}/teacher.html`;
    
                        // Create a link element and set the URL
                        const link = document.createElement("a");
                        link.href = url;
                        link.textContent = "View Teacher Profile";
                        link.target = "_blank"; // Open link in a new tab/window
    
                        // Append the link to the teacher info div
                        randomTeacherInfo.innerHTML = `<h3>${teacherName}</h3>`;
                        randomTeacherInfo.appendChild(link);
                    } else {
                        randomTeacherInfo.innerHTML = "Unable to fetch random teacher information.";
                    }
                } catch (error) {
                    randomTeacherInfo.innerHTML = "An error occurred while fetching random teacher information.";
                }
            });
        });
    </script>
    
    
</body>
</html>
